(()=>{"use strict";class e{constructor(){this.news=new class{draw(e){const t=e.length>=10?e.filter(((e,t)=>t<10)):e,r=document.createDocumentFragment(),s=document.querySelector("#newsItemTemp");t.forEach(((e,t)=>{const o=s.content.cloneNode(!0);t%2&&o.querySelector(".news__item").classList.add("alt"),o.querySelector(".news__meta-photo").style.backgroundImage=`url(${e.urlToImage||"img/news_placeholder.jpg"})`,o.querySelector(".news__meta-author").textContent=e.author||e.source.name,o.querySelector(".news__meta-date").textContent=e.publishedAt.slice(0,10).split("-").reverse().join("-"),o.querySelector(".news__description-title").textContent=e.title,o.querySelector(".news__description-source").textContent=e.source.name,o.querySelector(".news__description-content").textContent=e.description,o.querySelector(".news__read-more a").setAttribute("href",e.url),r.append(o)})),document.querySelector(".news").innerHTML="",document.querySelector(".news").appendChild(r)}},this.sources=new class{draw(e){const t=document.createDocumentFragment(),r=document.querySelector("#sourceItemTemp");e.forEach((e=>{const s=r.content.cloneNode(!0);s.querySelector(".source__item-name").textContent=e.name,s.querySelector(".source__item").setAttribute("data-source-id",e.id),t.append(s)})),document.querySelector(".sources").append(t)}}}drawNews(e){const t=e?.articles?e?.articles:[];this.news.draw(t)}drawSources(e){const t=e?.sources?e?.sources:[];this.sources.draw(t)}}(new class{constructor(){this.controller=new class extends class extends class{constructor(e,t){this.baseLink=e,this.options=t}getResp({endpoint:e,options:t={}},r=(()=>{console.error("No callback for GET response")})){this.load("GET",e,r,t)}errorHandler(e){if(!e.ok)throw 401!==e.status&&404!==e.status||console.log(`Sorry, but there is ${e.status} error: ${e.statusText}`),Error(e.statusText);return e}makeUrl(e,t){const r={...this.options,...e};let s=`${this.baseLink}${t}?`;return Object.keys(r).forEach((e=>{s+=`${e}=${r[e]}&`})),s.slice(0,-1)}load(e,t,r,s={}){fetch(this.makeUrl(s,t),{method:e}).then(this.errorHandler).then((e=>e.json())).then((e=>r(e))).catch((e=>console.error(e)))}}{constructor(){super("https://newsapi.org/v2/",{apiKey:"08fb5442cc4b41a3b7e211b5078e5cba"})}}{getSources(e){super.getResp({endpoint:"sources"},e)}getNews(e,t){let r=e.target;const s=e.currentTarget;for(;r!==s;){if(r.classList.contains("source__item")){const e=r.getAttribute("data-source-id");return void(s.getAttribute("data-source")!==e&&(s.setAttribute("data-source",e),super.getResp({endpoint:"everything",options:{sources:e}},t)))}r=r.parentNode}}},this.view=new e}start(){document.querySelector(".sources").addEventListener("click",(e=>this.controller.getNews(e,(e=>this.view.drawNews(e))))),this.controller.getSources((e=>this.view.drawSources(e)))}}).start()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUthLEVBQVFqQixFQUFVQyxFQUFVSCxFQUFVLElBQ3ZDb0IsTUFBTXJFLEtBQUsrRCxRQUFRZCxFQUFTRSxHQUFXLENBQUVpQixPQUFBQSxJQUNwQ0UsS0FBS3RFLEtBQUt3RCxjQUNWYyxNQUFNYixHQUFRQSxFQUFJYyxTQUNsQkQsTUFBTW5FLEdBQVNpRCxFQUFTakQsS0FDeEJxRSxPQUFPQyxHQUFRcEIsUUFBUUMsTUFBTW1CLE9EdEN0QzFFLGNBQ0kyRSxNQUFNLDBCQUEyQixDQUM3QkMsT0FBUSx1Q0RGaEJDLFdBQVd4QixHQUNQc0IsTUFBTXhCLFFBQ0YsQ0FDSUMsU0FBVSxXQUVkQyxHQUlSeUIsUUFBUUMsRUFBRzFCLEdBQ1AsSUFBSTJCLEVBQVNELEVBQUVDLE9BQ2YsTUFBTUMsRUFBZ0JGLEVBQUVHLGNBRXhCLEtBQU9GLElBQVdDLEdBQWUsQ0FDN0IsR0FBSUQsRUFBTzdELFVBQVVnRSxTQUFTLGdCQUFpQixDQUMzQyxNQUFNQyxFQUFXSixFQUFPSyxhQUFhLGtCQWFyQyxZQVpJSixFQUFjSSxhQUFhLGlCQUFtQkQsSUFDOUNILEVBQWM5QyxhQUFhLGNBQWVpRCxHQUMxQ1QsTUFBTXhCLFFBQ0YsQ0FDSUMsU0FBVSxhQUNWRixRQUFTLENBQ0xWLFFBQVM0QyxJQUdqQi9CLEtBS1oyQixFQUFTQSxFQUFPTSxjRDNCcEJyRixLQUFLc0YsS0FBTyxJQUFJeEYsRUFHcEJ5RixRQUNJOUUsU0FDS0csY0FBYyxZQUNkNEUsaUJBQWlCLFNBQVVWLEdBQU05RSxLQUFLK0MsV0FBVzhCLFFBQVFDLEdBQUkzRSxHQUFTSCxLQUFLc0YsS0FBSzNDLFNBQVN4QyxPQUM5RkgsS0FBSytDLFdBQVc2QixZQUFZekUsR0FBU0gsS0FBS3NGLEtBQUt4QyxZQUFZM0MsUURWL0RvRixTIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktd2VicGFjay1wcm9qZWN0Ly4vc3JjL2NvbXBvbmVudHMvdmlldy9hcHBWaWV3LmpzIiwid2VicGFjazovL215LXdlYnBhY2stcHJvamVjdC8uL3NyYy9jb21wb25lbnRzL3ZpZXcvbmV3cy9uZXdzLmpzIiwid2VicGFjazovL215LXdlYnBhY2stcHJvamVjdC8uL3NyYy9jb21wb25lbnRzL3ZpZXcvc291cmNlcy9zb3VyY2VzLmpzIiwid2VicGFjazovL215LXdlYnBhY2stcHJvamVjdC8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9teS13ZWJwYWNrLXByb2plY3QvLi9zcmMvY29tcG9uZW50cy9hcHAvYXBwLmpzIiwid2VicGFjazovL215LXdlYnBhY2stcHJvamVjdC8uL3NyYy9jb21wb25lbnRzL2NvbnRyb2xsZXIvY29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly9teS13ZWJwYWNrLXByb2plY3QvLi9zcmMvY29tcG9uZW50cy9jb250cm9sbGVyL2FwcExvYWRlci5qcyIsIndlYnBhY2s6Ly9teS13ZWJwYWNrLXByb2plY3QvLi9zcmMvY29tcG9uZW50cy9jb250cm9sbGVyL2xvYWRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTmV3cyBmcm9tICcuL25ld3MvbmV3cyc7XG5pbXBvcnQgU291cmNlcyBmcm9tICcuL3NvdXJjZXMvc291cmNlcyc7XG5cbmV4cG9ydCBjbGFzcyBBcHBWaWV3IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5uZXdzID0gbmV3IE5ld3MoKTtcbiAgICAgICAgdGhpcy5zb3VyY2VzID0gbmV3IFNvdXJjZXMoKTtcbiAgICB9XG5cbiAgICBkcmF3TmV3cyhkYXRhKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IGRhdGE/LmFydGljbGVzID8gZGF0YT8uYXJ0aWNsZXMgOiBbXTtcbiAgICAgICAgdGhpcy5uZXdzLmRyYXcodmFsdWVzKTtcbiAgICB9XG5cbiAgICBkcmF3U291cmNlcyhkYXRhKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IGRhdGE/LnNvdXJjZXMgPyBkYXRhPy5zb3VyY2VzIDogW107XG4gICAgICAgIHRoaXMuc291cmNlcy5kcmF3KHZhbHVlcyk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBcHBWaWV3O1xuIiwiaW1wb3J0ICcuL25ld3MuY3NzJztcblxuY2xhc3MgTmV3cyB7XG4gICAgZHJhdyhkYXRhKSB7XG4gICAgICAgIGNvbnN0IG5ld3MgPSBkYXRhLmxlbmd0aCA+PSAxMCA/IGRhdGEuZmlsdGVyKChfaXRlbSwgaWR4KSA9PiBpZHggPCAxMCkgOiBkYXRhO1xuXG4gICAgICAgIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICBjb25zdCBuZXdzSXRlbVRlbXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmV3c0l0ZW1UZW1wJyk7XG5cbiAgICAgICAgbmV3cy5mb3JFYWNoKChpdGVtLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld3NDbG9uZSA9IG5ld3NJdGVtVGVtcC5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcblxuICAgICAgICAgICAgaWYgKGlkeCAlIDIpIG5ld3NDbG9uZS5xdWVyeVNlbGVjdG9yKCcubmV3c19faXRlbScpLmNsYXNzTGlzdC5hZGQoJ2FsdCcpO1xuXG4gICAgICAgICAgICBuZXdzQ2xvbmUucXVlcnlTZWxlY3RvcignLm5ld3NfX21ldGEtcGhvdG8nKS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7XG4gICAgICAgICAgICAgICAgaXRlbS51cmxUb0ltYWdlIHx8ICdpbWcvbmV3c19wbGFjZWhvbGRlci5qcGcnXG4gICAgICAgICAgICB9KWA7XG4gICAgICAgICAgICBuZXdzQ2xvbmUucXVlcnlTZWxlY3RvcignLm5ld3NfX21ldGEtYXV0aG9yJykudGV4dENvbnRlbnQgPSBpdGVtLmF1dGhvciB8fCBpdGVtLnNvdXJjZS5uYW1lO1xuICAgICAgICAgICAgbmV3c0Nsb25lLnF1ZXJ5U2VsZWN0b3IoJy5uZXdzX19tZXRhLWRhdGUnKS50ZXh0Q29udGVudCA9IGl0ZW0ucHVibGlzaGVkQXRcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgMTApXG4gICAgICAgICAgICAgICAgLnNwbGl0KCctJylcbiAgICAgICAgICAgICAgICAucmV2ZXJzZSgpXG4gICAgICAgICAgICAgICAgLmpvaW4oJy0nKTtcblxuICAgICAgICAgICAgbmV3c0Nsb25lLnF1ZXJ5U2VsZWN0b3IoJy5uZXdzX19kZXNjcmlwdGlvbi10aXRsZScpLnRleHRDb250ZW50ID0gaXRlbS50aXRsZTtcbiAgICAgICAgICAgIG5ld3NDbG9uZS5xdWVyeVNlbGVjdG9yKCcubmV3c19fZGVzY3JpcHRpb24tc291cmNlJykudGV4dENvbnRlbnQgPSBpdGVtLnNvdXJjZS5uYW1lO1xuICAgICAgICAgICAgbmV3c0Nsb25lLnF1ZXJ5U2VsZWN0b3IoJy5uZXdzX19kZXNjcmlwdGlvbi1jb250ZW50JykudGV4dENvbnRlbnQgPSBpdGVtLmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgbmV3c0Nsb25lLnF1ZXJ5U2VsZWN0b3IoJy5uZXdzX19yZWFkLW1vcmUgYScpLnNldEF0dHJpYnV0ZSgnaHJlZicsIGl0ZW0udXJsKTtcblxuICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kKG5ld3NDbG9uZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXdzJykuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXdzJykuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmV3cztcbiIsImltcG9ydCAnLi9zb3VyY2VzLmNzcyc7XG5cbmNsYXNzIFNvdXJjZXMge1xuICAgIGRyYXcoZGF0YSkge1xuICAgICAgICBjb25zdCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgY29uc3Qgc291cmNlSXRlbVRlbXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc291cmNlSXRlbVRlbXAnKTtcblxuICAgICAgICBkYXRhLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZUNsb25lID0gc291cmNlSXRlbVRlbXAuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICAgICAgICAgIHNvdXJjZUNsb25lLnF1ZXJ5U2VsZWN0b3IoJy5zb3VyY2VfX2l0ZW0tbmFtZScpLnRleHRDb250ZW50ID0gaXRlbS5uYW1lO1xuICAgICAgICAgICAgc291cmNlQ2xvbmUucXVlcnlTZWxlY3RvcignLnNvdXJjZV9faXRlbScpLnNldEF0dHJpYnV0ZSgnZGF0YS1zb3VyY2UtaWQnLCBpdGVtLmlkKTtcblxuICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kKHNvdXJjZUNsb25lKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNvdXJjZXMnKS5hcHBlbmQoZnJhZ21lbnQpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU291cmNlcztcbiIsImltcG9ydCBBcHAgZnJvbSAnLi9jb21wb25lbnRzL2FwcC9hcHAnO1xuaW1wb3J0ICcuL2dsb2JhbC5jc3MnO1xudmFyIGFwcCA9IG5ldyBBcHAoKTtcbmFwcC5zdGFydCgpO1xuIiwiaW1wb3J0IEFwcENvbnRyb2xsZXIgZnJvbSAnLi4vY29udHJvbGxlci9jb250cm9sbGVyJztcbmltcG9ydCB7IEFwcFZpZXcgfSBmcm9tICcuLi92aWV3L2FwcFZpZXcnO1xuXG5jbGFzcyBBcHAge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSBuZXcgQXBwQ29udHJvbGxlcigpO1xuICAgICAgICB0aGlzLnZpZXcgPSBuZXcgQXBwVmlldygpO1xuICAgIH1cblxuICAgIHN0YXJ0KCkge1xuICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5zb3VyY2VzJylcbiAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB0aGlzLmNvbnRyb2xsZXIuZ2V0TmV3cyhlLCAoZGF0YSkgPT4gdGhpcy52aWV3LmRyYXdOZXdzKGRhdGEpKSk7XG4gICAgICAgIHRoaXMuY29udHJvbGxlci5nZXRTb3VyY2VzKChkYXRhKSA9PiB0aGlzLnZpZXcuZHJhd1NvdXJjZXMoZGF0YSkpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBwO1xuIiwiaW1wb3J0IEFwcExvYWRlciBmcm9tICcuL2FwcExvYWRlcic7XG5cbmNsYXNzIEFwcENvbnRyb2xsZXIgZXh0ZW5kcyBBcHBMb2FkZXIge1xuICAgIGdldFNvdXJjZXMoY2FsbGJhY2spIHtcbiAgICAgICAgc3VwZXIuZ2V0UmVzcChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBlbmRwb2ludDogJ3NvdXJjZXMnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbGxiYWNrXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZ2V0TmV3cyhlLCBjYWxsYmFjaykge1xuICAgICAgICBsZXQgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgIGNvbnN0IG5ld3NDb250YWluZXIgPSBlLmN1cnJlbnRUYXJnZXQ7XG5cbiAgICAgICAgd2hpbGUgKHRhcmdldCAhPT0gbmV3c0NvbnRhaW5lcikge1xuICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3NvdXJjZV9faXRlbScpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc291cmNlSWQgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXNvdXJjZS1pZCcpO1xuICAgICAgICAgICAgICAgIGlmIChuZXdzQ29udGFpbmVyLmdldEF0dHJpYnV0ZSgnZGF0YS1zb3VyY2UnKSAhPT0gc291cmNlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3c0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2RhdGEtc291cmNlJywgc291cmNlSWQpO1xuICAgICAgICAgICAgICAgICAgICBzdXBlci5nZXRSZXNwKFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZHBvaW50OiAnZXZlcnl0aGluZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiBzb3VyY2VJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBcHBDb250cm9sbGVyO1xuIiwiaW1wb3J0IExvYWRlciBmcm9tICcuL2xvYWRlcic7XG5cbmNsYXNzIEFwcExvYWRlciBleHRlbmRzIExvYWRlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdodHRwczovL25ld3NhcGkub3JnL3YyLycsIHtcbiAgICAgICAgICAgIGFwaUtleTogJzA4ZmI1NDQyY2M0YjQxYTNiN2UyMTFiNTA3OGU1Y2JhJywgXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBwTG9hZGVyO1xuIiwiY2xhc3MgTG9hZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihiYXNlTGluaywgb3B0aW9ucykge1xuICAgICAgICB0aGlzLmJhc2VMaW5rID0gYmFzZUxpbms7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgfVxuXG4gICAgZ2V0UmVzcChcbiAgICAgICAgeyBlbmRwb2ludCwgb3B0aW9ucyA9IHt9IH0sXG4gICAgICAgIGNhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm8gY2FsbGJhY2sgZm9yIEdFVCByZXNwb25zZScpO1xuICAgICAgICB9XG4gICAgKSB7XG4gICAgICAgIHRoaXMubG9hZCgnR0VUJywgZW5kcG9pbnQsIGNhbGxiYWNrLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBlcnJvckhhbmRsZXIocmVzKSB7XG4gICAgICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gNDAxIHx8IHJlcy5zdGF0dXMgPT09IDQwNClcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgU29ycnksIGJ1dCB0aGVyZSBpcyAke3Jlcy5zdGF0dXN9IGVycm9yOiAke3Jlcy5zdGF0dXNUZXh0fWApO1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IocmVzLnN0YXR1c1RleHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG5cbiAgICBtYWtlVXJsKG9wdGlvbnMsIGVuZHBvaW50KSB7XG4gICAgICAgIGNvbnN0IHVybE9wdGlvbnMgPSB7IC4uLnRoaXMub3B0aW9ucywgLi4ub3B0aW9ucyB9O1xuICAgICAgICBsZXQgdXJsID0gYCR7dGhpcy5iYXNlTGlua30ke2VuZHBvaW50fT9gO1xuXG4gICAgICAgIE9iamVjdC5rZXlzKHVybE9wdGlvbnMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgdXJsICs9IGAke2tleX09JHt1cmxPcHRpb25zW2tleV19JmA7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB1cmwuc2xpY2UoMCwgLTEpO1xuICAgIH1cblxuICAgIGxvYWQobWV0aG9kLCBlbmRwb2ludCwgY2FsbGJhY2ssIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBmZXRjaCh0aGlzLm1ha2VVcmwob3B0aW9ucywgZW5kcG9pbnQpLCB7IG1ldGhvZCB9KVxuICAgICAgICAgICAgLnRoZW4odGhpcy5lcnJvckhhbmRsZXIpXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IGNhbGxiYWNrKGRhdGEpKVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBMb2FkZXI7XG4iXSwibmFtZXMiOlsiQXBwVmlldyIsImNvbnN0cnVjdG9yIiwidGhpcyIsIm5ld3MiLCJkcmF3IiwiZGF0YSIsImxlbmd0aCIsImZpbHRlciIsIl9pdGVtIiwiaWR4IiwiZnJhZ21lbnQiLCJkb2N1bWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJuZXdzSXRlbVRlbXAiLCJxdWVyeVNlbGVjdG9yIiwiZm9yRWFjaCIsIml0ZW0iLCJuZXdzQ2xvbmUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY2xhc3NMaXN0IiwiYWRkIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJ1cmxUb0ltYWdlIiwidGV4dENvbnRlbnQiLCJhdXRob3IiLCJzb3VyY2UiLCJuYW1lIiwicHVibGlzaGVkQXQiLCJzbGljZSIsInNwbGl0IiwicmV2ZXJzZSIsImpvaW4iLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwic2V0QXR0cmlidXRlIiwidXJsIiwiYXBwZW5kIiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJzb3VyY2VzIiwic291cmNlSXRlbVRlbXAiLCJzb3VyY2VDbG9uZSIsImlkIiwiZHJhd05ld3MiLCJ2YWx1ZXMiLCJhcnRpY2xlcyIsImRyYXdTb3VyY2VzIiwiY29udHJvbGxlciIsImJhc2VMaW5rIiwib3B0aW9ucyIsImdldFJlc3AiLCJlbmRwb2ludCIsImNhbGxiYWNrIiwiY29uc29sZSIsImVycm9yIiwibG9hZCIsImVycm9ySGFuZGxlciIsInJlcyIsIm9rIiwic3RhdHVzIiwibG9nIiwic3RhdHVzVGV4dCIsIkVycm9yIiwibWFrZVVybCIsInVybE9wdGlvbnMiLCJPYmplY3QiLCJrZXlzIiwia2V5IiwibWV0aG9kIiwiZmV0Y2giLCJ0aGVuIiwianNvbiIsImNhdGNoIiwiZXJyIiwic3VwZXIiLCJhcGlLZXkiLCJnZXRTb3VyY2VzIiwiZ2V0TmV3cyIsImUiLCJ0YXJnZXQiLCJuZXdzQ29udGFpbmVyIiwiY3VycmVudFRhcmdldCIsImNvbnRhaW5zIiwic291cmNlSWQiLCJnZXRBdHRyaWJ1dGUiLCJwYXJlbnROb2RlIiwidmlldyIsInN0YXJ0IiwiYWRkRXZlbnRMaXN0ZW5lciJdLCJzb3VyY2VSb290IjoiIn0=